{% capture title %}{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}{% endcapture %}
{% capture description %}{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines }}{% else %}{{ site.description }}{% endif %}{% endcapture %}
{% capture url %}{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}{% endcapture %}
{% capture image %}{% if page.slug %}{{ page.slug | prepend: '/images/article-thumbs/' | prepend: site.baseurl | prepend: site.url | append: '.png' }}{% endif %}{% endcapture %}

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ title }}</title>

    <meta name="description" content="{{ description | truncate: 160 }}">

    <link rel="stylesheet" href="{{ "/css/main.css" | prepend: site.baseurl }}">
    <link rel="canonical" href="{{ url }}">
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@{{ site.twitter_username }}">

    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:url" content="{{ url }}">
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ description }}">
    <meta property="og:image" content="{{ image }}">
    <meta property="article:author" content="https://www.facebook.com/{{ site.facebook_username }}">

    <script src="https://use.typekit.net/zsw3brj.js"></script>
    <script>try{Typekit.load({ async: false });}catch(e){}</script>

    {% include favicons.html %}
  </head>

  <body>

    {% include header.html %}

    {% include sub-navigation.html %}

    <div class="site-page">
      <div class="wrapper">
        {{ content }}
      </div>
    </div>

    {% include footer.html %}

    {% if jekyll.environment == 'production' %}
      {% include google-analytics.html %}
    {% endif %}
  </body>
</html>
